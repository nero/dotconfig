#!/bin/sh
fail() {
        echo "$1" >&2
        exit 1
}

cmd_exists() {
        command -v "$1" >/dev/null 2>&1
}

if cmd_exists xterm; then
  exec xterm -e "$@"
elif cmd_exists urxvtd; then
  export RXVT_SOCKET="${XDG_RUNTIME_DIR}/rxvt${DISPLAY}.sck"
  urxvtc -e "$@"
  if [ $? -eq 2 ]; then
    urxvtd -q -o -f
    urxvtc -e "$@"
  fi
  exit
elif cmd_exists urxvt; then
  exec urxvt -e "$@"
else
  fail "No emulator found"
fi
