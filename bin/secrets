#!/bin/sh
cd "$HOME/.secrets" || exit 1
EMAIL=$(cat self)
case "$1" in
list) find -name '*.gpg' | sed 's|^./||;s|\.gpg$||' ;;
set)  gpg --output "${2}".gpg --encrypt --recipient "$EMAIL" ;;
get)  gpg --decrypt "${2}".gpg ;;
gen)  echo $(</dev/urandom tr -dc A-Za-z0-9 | dd count=1 bs=16 2>/dev/null) ;;
*)    exit 1 ;;
esac
