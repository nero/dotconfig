#!/bin/sh
# Move into trash instead of deleting
set -e
trash=$HOME/.local/share/deleted

fail() {
  echo "$1" >&2
  exit 1
}

for name in "$@"; do
  case "$name" in
  (/*) ;;
  (*) name=$PWD/$name ;;
  esac

  test -e "${name}" || fail "${name}: not found"
  mkdir -p "${trash}"
  hash=$(urlencode "$name")
  rotate "${trash}/${hash}"
  (
    set -x
    mv "${name}" "${trash}/${hash}"
  )
done
