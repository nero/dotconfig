session_log_event() {
  [ -f ~/log/shell.log ] && ( echo $(date -Iseconds) $(tty) $$ "$@" >> ~/log/shell.log )
}

session_exit_hook() {
  session_log_event close
}

session_log_event open $- ${SSH_CLIENT%% *}

trap session_exit_hook EXIT
